# 角色权限管理系统

## 功能概述

本系统实现了基于角色的权限管理，支持管理员和学生两种角色，并提供完整的管理员后台功能。

## 角色说明

### 学生角色 (student)
- 可以访问：首页、学业课程、二课活动、个人中心、设置
- 在Header中显示"学生"标签
- 无法访问管理员后台

### 管理员角色 (admin)
- 可以访问：所有学生功能 + 管理员后台
- 在Header中显示"管理员"标签和"管理员后台"菜单
- 拥有完整的管理员管理权限

## 管理员后台功能

### 1. 管理员列表管理
- 查看所有管理员信息
- 支持按用户名和状态筛选
- 分页显示
- 实时搜索

### 2. 添加管理员
- 用户名（必填，3-20字符）
- 姓名（必填）
- 邮箱（必填，邮箱格式验证）
- 密码（必填，6-20字符）
- 角色选择（管理员/学生）
- 状态设置（启用/禁用）

### 3. 编辑管理员
- 修改管理员基本信息
- 不能修改密码（安全考虑）
- 可以修改角色和状态

### 4. 状态管理
- 启用/禁用管理员账户
- 一键切换状态
- 状态变更确认提示

### 5. 删除管理员
- 删除管理员账户
- 删除前确认提示
- 不可恢复操作

## API接口说明

### 登录接口
```
POST /admin/employee/login
```
**请求参数：**
```json
{
  "username": "用户名",
  "password": "密码"
}
```

**响应数据：**
```json
{
  "code": 0,
  "data": {
    "id": 1,
    "name": "用户姓名",
    "token": "JWT_TOKEN",
    "userName": "用户名",
    "role": "admin" // 或 "student"
  },
  "msg": "登录成功"
}
```

### 管理员管理接口

#### 1. 获取管理员列表
```
GET /admin/list?page=1&size=10&userName=搜索关键词&status=1
```

#### 2. 添加管理员
```
POST /admin/add
```
**请求参数：**
```json
{
  "userName": "用户名",
  "name": "姓名",
  "phone": "手机号",
  "sex": "性别",
  "username": "用户名",
  "password": "密码",
  "status": 1
}
```

#### 3. 修改管理员
```
PUT /admin/update/{id}
```

#### 4. 删除管理员
```
DELETE /admin/delete/{id}
```

#### 5. 修改状态
```
PATCH /admin/status/{id}
```
**请求参数：**
```json
{
  "status": 1 // 1-启用, 0-禁用
}
```

#### 6. 获取管理员详情
```
GET /admin/detail/{id}
```

## 权限控制

### 路由守卫
- `requiresAuth: true` - 需要登录
- `requiresAdmin: true` - 需要管理员权限

### 组件权限
- Header组件根据用户角色显示不同菜单
- 管理员后台只有管理员可以访问
- 非管理员访问管理员页面会被重定向到首页

## 使用说明

### 1. 登录测试
使用不同的用户账号登录，系统会自动识别角色：
- 管理员账号：显示管理员标签和后台菜单
- 学生账号：显示学生标签，无后台菜单

### 2. 管理员后台使用
1. 登录管理员账号
2. 点击Header中的"管理员后台"菜单
3. 在后台页面可以：
   - 查看管理员列表
   - 添加新管理员
   - 编辑现有管理员
   - 启用/禁用管理员
   - 删除管理员

### 3. 权限验证
- 学生用户无法访问 `/admin` 路由
- 未登录用户访问需要权限的页面会跳转到登录页
- 登录后会自动跳转回原页面

## 技术实现

### Vuex状态管理
- `userInfo.role` - 用户角色
- `isAdmin` - 是否为管理员
- `isStudent` - 是否为学生

### 组件权限控制
```javascript
// 在组件中使用
computed: {
  ...mapGetters('user', ['isAdmin', 'isStudent'])
}
```

### 路由权限控制
```javascript
// 路由配置
{
  path: '/admin',
  meta: { 
    requiresAuth: true,
    requiresAdmin: true
  }
}
```

## 注意事项

1. **安全性**：管理员密码不能通过编辑功能修改
2. **权限验证**：所有管理员操作都需要验证用户权限
3. **状态管理**：用户角色信息存储在Vuex中，页面刷新后需要重新获取
4. **错误处理**：所有API调用都有完整的错误处理机制

## 扩展功能

可以根据需要添加更多功能：
- 角色权限细分（如超级管理员、普通管理员）
- 操作日志记录
- 批量操作功能
- 数据导出功能
